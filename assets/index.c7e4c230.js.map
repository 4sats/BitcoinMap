{"version":3,"file":"index.c7e4c230.js","sources":["../../vite/modulepreload-polyfill","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import 'ol/ol.css';\nimport KML from 'ol/format/KML';\nimport Map from 'ol/Map';\nimport Stamen from 'ol/source/Stamen';\nimport VectorSource from 'ol/source/Vector';\nimport View from 'ol/View';\nimport {Circle as CircleStyle, Fill, Stroke, Style} from 'ol/style';\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\nimport {transform} from 'ol/proj';\n\nconst styleCache = {};\nconst styleFunction = function (feature) {\n  // 2012_Earthquakes_Mag5.kml stores the magnitude of each earthquake in a\n  // standards-violating <magnitude> tag in each Placemark.  We extract it from\n  // the Placemark's name instead.\n  //const name = feature.get('name');\n  //const magnitude = parseFloat(name.substr(2));\n  const radius = 10;\n  let style = styleCache[radius];\n  if (!style) {\n    style = new Style({\n      image: new CircleStyle({\n        radius: radius,\n        fill: new Fill({\n          color: 'rgba(255, 153, 0, 0.4)',\n        }),\n        stroke: new Stroke({\n          color: 'rgba(255, 204, 0, 0.2)',\n          width: 1,\n        }),\n      }),\n    });\n    styleCache[radius] = style;\n  }\n  return style;\n};\n\nconst vector = new VectorLayer({\n  source: new VectorSource({\n    url: 'data/kml/export2.kml',\n    format: new KML({\n      extractStyles: false,\n    }),\n  }),\n  style: styleFunction,\n});\n\nconst raster = new TileLayer({\n  source: new Stamen({\n    layer: 'toner',\n  }),\n});\n\nconst map = new Map({\n  layers: [raster, vector],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n\nconst info = $('#info');\ninfo.tooltip({\n  animation: false,\n  trigger: 'manual',\n});\n\nconst displayFeatureInfo = function (pixel) {\n  info.css({\n    left: pixel[0] + 'px',\n    top: pixel[1] - 15 + 'px',\n  });\n  const feature = map.forEachFeatureAtPixel(pixel, function (feature) {\n    return feature;\n  });\n  if (feature) {\n    info.attr('data-original-title', feature.get('name')).tooltip('show');\n  } else {\n    info.tooltip('hide');\n  }\n};\n\nconst clickFeatureInfo = function (pixel) {\n  info.css({\n    left: pixel[0] + 'px',\n    top: pixel[1] - 15 + 'px',\n  });\n  const feature = map.forEachFeatureAtPixel(pixel, function (feature) {\n    return feature;\n  });\n  if (feature) {\n    const fet = feature.clone();\n    const coordinate = fet.getGeometry().transform('EPSG:3857', 'EPSG:4326').getCoordinates();\n    const coordinates = coordinate.toString().split(\",\");\n    map.getView().setCenter(transform([coordinates[0], coordinates[1]], 'EPSG:4326', 'EPSG:3857'));\n    map.getView().getZoom()<15 ? map.getView().setZoom(map.getView().getZoom() + 3):\"\";\n    console.log(map.getView().getZoom())\n    info.tooltip('hide');\n    $(\"#header\").html(feature.get(\"name\"));\n    $(\"#body\").html(\n      \"<p>\"+feature.get(\"description\")+'<br> <a href=\"https://www.openstreetmap.org/#map=19/'+coordinates[1]+'/'+coordinates[0]+'\" target=\"_blank\">Open in OSM</a>'\n      +'<br> <a href=\"https://maps.google.com/?q='+coordinates[1]+','+coordinates[0]+'\" target=\"_blank\">Open in Google Maps</a>'\n      +\"</p>\"\n    );\n    $(\"#myModal\").modal();\n  } else {\n    info.tooltip('hide');\n  }\n};\n\nmap.on('pointermove', function (evt) {\n  if (evt.dragging) {\n    info.tooltip('hide');\n    return;\n  }\n  displayFeatureInfo(map.getEventPixel(evt.originalEvent));\n});\n\nmap.on('click', function (evt) {\n  clickFeatureInfo(evt.pixel);\n});\n"],"names":[],"mappings":"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"}